import{_ as S,a as b,H as C,l as $,S as N,m as B,o as i,d as v,w as d,g as e,v as E,z as T,u as t,x as V,f as p,y as u,T as I,c as r,F as O,e as R,i as D,t as m,j as y,h as j,M as z,O as F,W as G,p as H,k as K}from"./index-BMd-QA-V.js";import{_ as U}from"./MessageRender-BhNf53ew.js";import"./regex-CP_ygsHJ.js";import"./emoji-B_StZ82w.js";import"./ImageFile-SGnJshYu.js";const _=c=>(H("data-v-00e0cad9"),c=c(),K(),c),W={class:"py-2 me-2"},A={class:"search-box d-flex"},L={class:"flex-fill me-2"},q=["placeholder"],J=_(()=>e("i",{class:"ri-search-2-line search-icon"},null,-1)),P={class:"d-flex list-group-item list-group-item-action mt-1 p-2"},Q=["onClick"],X={class:"d-flex flex-shrink-0 align-items-end flex-column"},Y={class:"flex-fill dropdown"},Z=_(()=>e("a",{"data-bs-toggle":"dropdown"},[e("i",{class:"ri-more-2-fill"})],-1)),ee={class:"dropdown-menu p-0"},se=["onClick"],te=_(()=>e("i",{class:"ri-message-3-line me-2"},null,-1)),oe={class:"flex-shrink-0 m-0"},ae={key:0,class:"text-muted time"},le={key:1,class:"text-muted time"},ie={key:1,class:"p-3 text-center fs-16 list-group-item"},re=_(()=>e("i",{class:"ri ri-chat-1-line me-2"},null,-1)),ce={__name:"MessageSearchModal",setup(c){const f=b(),n=C.useEvent(),h=$(null);N();const s=B({room:{},overlay:!1,messages:[],keyword:""});n.on("show-modal-search-message",async o=>{if(h.value.show(),o){s.overlay=!0,s.keyword=o;const a=await f.searchMessage({room_id:f.chat.CURRENT_ROOM.id,keyword:o});a.success&&(s.messages=a.data.MESSAGE),s.overlay=!1}});const g=function(o){h.value.hide(),n.emit("chat_scroll_id",{id:o.id,behavior:"smooth"})};return(o,a)=>{const k=z,w=F,x=G;return i(),v(x,{size:"lg",ref_key:"modal",ref:h,title:"Search Messages","hide-footer":"",scrollable:"",class:"search-modal"},{default:d(()=>[e("div",W,[e("div",A,[e("div",L,[E(e("input",{type:"text",class:"form-control bg-light border-light",placeholder:o.$t("chat.message.find-message-in-room"),id:"searchMessage",onKeyup:a[0]||(a[0]=T(l=>t(n).emit("show-modal-search-message",t(s).keyword),["enter"])),"onUpdate:modelValue":a[1]||(a[1]=l=>t(s).keyword=l)},null,40,q),[[V,t(s).keyword]]),J]),p(k,{class:"flex-shrink-0",variant:"success",onClick:a[2]||(a[2]=l=>t(n).emit("show-modal-search-message",t(s).keyword))},{default:d(()=>[u("Search")]),_:1})])]),p(w,{show:t(s).overlay,"spinner-variant":"secondary",style:{"min-height":"300px"}},{default:d(()=>[t(s).messages?(i(),v(I,{key:0,tag:"ul",name:"fade",class:"list-group"},{default:d(()=>[Object.keys(t(s).messages).length>0?(i(!0),r(O,{key:0},R(t(s).messages,l=>(i(),r("li",P,[e("div",{onClick:M=>g(l),class:"flex-fill"},[p(U,{item:l},null,8,["item"])],8,Q),e("div",X,[e("div",Y,[Z,e("div",ee,[e("a",{onClick:D(M=>g(l),["prevent","stop"]),class:"dropdown-item reply-message cursor-pointer"},[te,u(" "+m(o.$t("chat.message.detail")),1)],8,se)])]),e("div",oe,[l.status===4?(i(),r("small",ae,m(t(y).fromNow(Date.now())),1)):(i(),r("small",le,m(t(y).fromNow(l.created_at)),1))])])]))),256)):(i(),r("li",ie,[re,u(m(o.$t("chat.message.message-empty")),1)]))]),_:1})):j("",!0)]),_:1},8,["show"])]),_:1},512)}}},pe=S(ce,[["__scopeId","data-v-00e0cad9"]]);export{pe as default};
